<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gaia: src/kern/vm/vmem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gaia
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('vmem_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vmem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of the VMem resource allocator as described in <a href="https://www.usenix.org/legacy/event/usenix01/full_papers/bonwick/bonwick.pdf">https://www.usenix.org/legacy/event/usenix01/full_papers/bonwick/bonwick.pdf</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/queue.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="vmem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvmem__segment.html">vmem_segment</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvmem__stat__t.html">vmem_stat_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvmem.html">vmem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9010e2042c4168a1974f9fd07426f169"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a9010e2042c4168a1974f9fd07426f169">VM_BESTFIT</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:a9010e2042c4168a1974f9fd07426f169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df01c590f12e94a46566a3e448c0002"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a5df01c590f12e94a46566a3e448c0002">VM_INSTANTFIT</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:a5df01c590f12e94a46566a3e448c0002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1a65b825818427bc59455786d53972"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#aec1a65b825818427bc59455786d53972">VM_NEXTFIT</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="separator:aec1a65b825818427bc59455786d53972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58388307375ca173637c0b4888bfc9a"><td class="memItemLeft" align="right" valign="top"><a id="ad58388307375ca173637c0b4888bfc9a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VM_SLEEP</b>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="separator:ad58388307375ca173637c0b4888bfc9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1ebe5e49c63af9782d66ce566ea41c1"><td class="memItemLeft" align="right" valign="top"><a id="af1ebe5e49c63af9782d66ce566ea41c1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VM_NOSLEEP</b>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="separator:af1ebe5e49c63af9782d66ce566ea41c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6438ada87cf912a8d7b12205a838d132"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a6438ada87cf912a8d7b12205a838d132">VM_BOOTSTRAP</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="separator:a6438ada87cf912a8d7b12205a838d132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1168ff08549be4226ca10918d352e2a"><td class="memItemLeft" align="right" valign="top"><a id="ac1168ff08549be4226ca10918d352e2a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VMEM_ERR_NO_MEM</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ac1168ff08549be4226ca10918d352e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63b63c87a24885af8efe3637e0333e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#ac63b63c87a24885af8efe3637e0333e6">FREELISTS_N</a>&#160;&#160;&#160;sizeof(void *) * CHAR_BIT</td></tr>
<tr class="separator:ac63b63c87a24885af8efe3637e0333e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a739e5dab2cf833d58ef4c965d196ad75"><td class="memItemLeft" align="right" valign="top"><a id="a739e5dab2cf833d58ef4c965d196ad75"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HASHTABLES_N</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a739e5dab2cf833d58ef4c965d196ad75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac5510796eb4847fd71c2712ae93684ab"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#ac5510796eb4847fd71c2712ae93684ab">vmem_alloc_t</a>(struct <a class="el" href="structvmem.html">vmem</a> *<a class="el" href="structvmem.html">vmem</a>, size_t size, int flags)</td></tr>
<tr class="separator:ac5510796eb4847fd71c2712ae93684ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f8c2e9ca87a686c0127d0d646f08f7"><td class="memItemLeft" align="right" valign="top"><a id="a62f8c2e9ca87a686c0127d0d646f08f7"></a>
typedef void&#160;</td><td class="memItemRight" valign="bottom"><b>vmem_free_t</b>(struct <a class="el" href="structvmem.html">vmem</a> *<a class="el" href="structvmem.html">vmem</a>, void *addr, size_t size)</td></tr>
<tr class="separator:a62f8c2e9ca87a686c0127d0d646f08f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9391bac1903746316834040937f0f2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structvmem__segment.html">vmem_segment</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a9e9391bac1903746316834040937f0f2">vmem_segment_t</a></td></tr>
<tr class="separator:a9e9391bac1903746316834040937f0f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4230d211a100ddeb267606a7cbd110"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structvmem.html">vmem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a></td></tr>
<tr class="separator:abd4230d211a100ddeb267606a7cbd110"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9910d47fcc46e8dd6f66380a6e9431ec"><td class="memItemLeft" align="right" valign="top"><a id="a9910d47fcc46e8dd6f66380a6e9431ec"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>LIST_HEAD</b> (vmem_seglist, <a class="el" href="structvmem__segment.html">vmem_segment</a>) vmem_seglist_t</td></tr>
<tr class="separator:a9910d47fcc46e8dd6f66380a6e9431ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda595c2df3d3c9a1616952f0262d9c4"><td class="memItemLeft" align="right" valign="top"><a id="afda595c2df3d3c9a1616952f0262d9c4"></a>
typedef&#160;</td><td class="memItemRight" valign="bottom"><b>TAILQ_HEAD</b> (vmem_segqueue, <a class="el" href="structvmem__segment.html">vmem_segment</a>) vmem_segqueue_t</td></tr>
<tr class="separator:afda595c2df3d3c9a1616952f0262d9c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a466c9044cb01bdce8c189d04efb37742"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a466c9044cb01bdce8c189d04efb37742">vmem_init</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *<a class="el" href="structvmem.html">vmem</a>, char *name, void *base, size_t size, size_t quantum, <a class="el" href="vmem_8h.html#ac5510796eb4847fd71c2712ae93684ab">vmem_alloc_t</a> *afunc, vmem_free_t *ffunc, <a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *source, size_t qcache_max, int vmflag)</td></tr>
<tr class="separator:a466c9044cb01bdce8c189d04efb37742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d90b81e234b7fe26e044a09dcd48fb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a8d90b81e234b7fe26e044a09dcd48fb6">vmem_destroy</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp)</td></tr>
<tr class="separator:a8d90b81e234b7fe26e044a09dcd48fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299ab5997f3dc888f01c1b4ac8e5c0b1"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a299ab5997f3dc888f01c1b4ac8e5c0b1">vmem_alloc</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp, size_t size, int vmflag)</td></tr>
<tr class="separator:a299ab5997f3dc888f01c1b4ac8e5c0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca21d3f7cfb9deff355b53ea720c02d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#aca21d3f7cfb9deff355b53ea720c02d9">vmem_free</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp, void *addr, size_t size)</td></tr>
<tr class="separator:aca21d3f7cfb9deff355b53ea720c02d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53f92ddf042899aaa4c54b0748d3fa6"><td class="memItemLeft" align="right" valign="top"><a id="ac53f92ddf042899aaa4c54b0748d3fa6"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>vmem_xalloc</b> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp, size_t size, size_t align, size_t phase, size_t nocross, void *minaddr, void *maxaddr, int vmflag)</td></tr>
<tr class="separator:ac53f92ddf042899aaa4c54b0748d3fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762319cb26403a0110da38b6f131f3db"><td class="memItemLeft" align="right" valign="top"><a id="a762319cb26403a0110da38b6f131f3db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>vmem_xfree</b> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp, void *addr, size_t size)</td></tr>
<tr class="separator:a762319cb26403a0110da38b6f131f3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7575b03802e969b0ba0187ab3e9dd82b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a7575b03802e969b0ba0187ab3e9dd82b">vmem_add</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp, void *addr, size_t size, int vmflag)</td></tr>
<tr class="separator:a7575b03802e969b0ba0187ab3e9dd82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0566c543192e7ed7f243e7cf82a8e4d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a0566c543192e7ed7f243e7cf82a8e4d8">vmem_dump</a> (<a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *vmp)</td></tr>
<tr class="separator:a0566c543192e7ed7f243e7cf82a8e4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2089ef0a58de9d9e2f0a16e142cc7a7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vmem_8h.html#a2089ef0a58de9d9e2f0a16e142cc7a7d">vmem_bootstrap</a> (void)</td></tr>
<tr class="separator:a2089ef0a58de9d9e2f0a16e142cc7a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the VMem resource allocator as described in <a href="https://www.usenix.org/legacy/event/usenix01/full_papers/bonwick/bonwick.pdf">https://www.usenix.org/legacy/event/usenix01/full_papers/bonwick/bonwick.pdf</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac63b63c87a24885af8efe3637e0333e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac63b63c87a24885af8efe3637e0333e6">&#9670;&nbsp;</a></span>FREELISTS_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREELISTS_N&#160;&#160;&#160;sizeof(void *) * CHAR_BIT</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sizeof(void *) * CHAR_BIT (8) freelists provides us with a freelist for every power-of-2 length that can fit within the host's virtual address space (64 bit) </p>

</div>
</div>
<a id="a9010e2042c4168a1974f9fd07426f169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9010e2042c4168a1974f9fd07426f169">&#9670;&nbsp;</a></span>VM_BESTFIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_BESTFIT&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Directs vmem to use the smallest free segment that can satisfy the allocation. This policy tends to minimize fragmentation of very small, precious resources (cited from paper) </p>

</div>
</div>
<a id="a6438ada87cf912a8d7b12205a838d132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6438ada87cf912a8d7b12205a838d132">&#9670;&nbsp;</a></span>VM_BOOTSTRAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_BOOTSTRAP&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used to eliminate cyclic dependencies when refilling the segment freelist: We need to allocate new segments but to allocate new segments, we need to refill the list, this flag ensures that no refilling occurs. </p>

</div>
</div>
<a id="a5df01c590f12e94a46566a3e448c0002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df01c590f12e94a46566a3e448c0002">&#9670;&nbsp;</a></span>VM_INSTANTFIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_INSTANTFIT&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Directs vmem to provide a good approximation to best−fit in guaranteed constant time. This is the default allocation policy. (cited from paper) </p>

</div>
</div>
<a id="aec1a65b825818427bc59455786d53972"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec1a65b825818427bc59455786d53972">&#9670;&nbsp;</a></span>VM_NEXTFIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_NEXTFIT&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Directs vmem to use the next free segment after the one previously allocated. This is useful for things like process IDs, where we want to cycle through all the IDs before reusing them. (cited from paper) </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac5510796eb4847fd71c2712ae93684ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5510796eb4847fd71c2712ae93684ab">&#9670;&nbsp;</a></span>vmem_alloc_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* vmem_alloc_t(struct <a class="el" href="structvmem.html">vmem</a> *<a class="el" href="structvmem.html">vmem</a>, size_t size, int flags)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>vmem_t allows one arena to import its resources from another. vmem_create() specifies the source arena, and the functions to allocate and free from that source. The arena imports new spans as needed, and gives them back when all their segments have been freed. (cited from paper) These types describe those functions. </p>

</div>
</div>
<a id="a9e9391bac1903746316834040937f0f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e9391bac1903746316834040937f0f2">&#9670;&nbsp;</a></span>vmem_segment_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvmem__segment.html">vmem_segment</a> <a class="el" href="vmem_8h.html#a9e9391bac1903746316834040937f0f2">vmem_segment_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Describes a Vmem segment </p>

</div>
</div>
<a id="abd4230d211a100ddeb267606a7cbd110"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4230d211a100ddeb267606a7cbd110">&#9670;&nbsp;</a></span>vmem_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvmem.html">vmem</a> <a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Description of an arena, a collection of resources. An arena is simply a set of integers. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7575b03802e969b0ba0187ab3e9dd82b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7575b03802e969b0ba0187ab3e9dd82b">&#9670;&nbsp;</a></span>vmem_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vmem_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vmflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a span to an arena </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmp</td><td>The arena to add a span to </td></tr>
    <tr><td class="paramname">addr</td><td>The start of the span </td></tr>
    <tr><td class="paramname">size</td><td>The size of the span </td></tr>
    <tr><td class="paramname">vmflag</td><td>VM_NOSLEEP or VM_SLEEP </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL on failure, addr on success </dd></dl>

</div>
</div>
<a id="a299ab5997f3dc888f01c1b4ac8e5c0b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a299ab5997f3dc888f01c1b4ac8e5c0b1">&#9670;&nbsp;</a></span>vmem_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vmem_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vmflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates a resource from an arena </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmp</td><td>The arena to allocate from </td></tr>
    <tr><td class="paramname">size</td><td>Size of the allocation </td></tr>
    <tr><td class="paramname">vmflag</td><td>may specify an allocation policy (VM_BESTFIT, VM_INSTANTFIT, or VM_NEXTFIT), default is VM_INSTANTFIT. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Allocated resource </dd></dl>

</div>
</div>
<a id="a2089ef0a58de9d9e2f0a16e142cc7a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2089ef0a58de9d9e2f0a16e142cc7a7d">&#9670;&nbsp;</a></span>vmem_bootstrap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmem_bootstrap </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Early bootstrap </p>

</div>
</div>
<a id="a8d90b81e234b7fe26e044a09dcd48fb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d90b81e234b7fe26e044a09dcd48fb6">&#9670;&nbsp;</a></span>vmem_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmem_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys an area </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmp</td><td>Arena to destroy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0566c543192e7ed7f243e7cf82a8e4d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0566c543192e7ed7f243e7cf82a8e4d8">&#9670;&nbsp;</a></span>vmem_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmem_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dumps an arena </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmp</td><td>The arena to dump </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca21d3f7cfb9deff355b53ea720c02d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca21d3f7cfb9deff355b53ea720c02d9">&#9670;&nbsp;</a></span>vmem_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vmem_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees a resource from an arena </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmp</td><td>The arena to free from </td></tr>
    <tr><td class="paramname">addr</td><td>The address to free </td></tr>
    <tr><td class="paramname">size</td><td>The size to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a466c9044cb01bdce8c189d04efb37742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a466c9044cb01bdce8c189d04efb37742">&#9670;&nbsp;</a></span>vmem_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vmem_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>vmem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>quantum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#ac5510796eb4847fd71c2712ae93684ab">vmem_alloc_t</a> *&#160;</td>
          <td class="paramname"><em>afunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vmem_free_t *&#160;</td>
          <td class="paramname"><em>ffunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vmem_8h.html#abd4230d211a100ddeb267606a7cbd110">vmem_t</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>qcache_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vmflag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes a vmem arena </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vmem</td><td>The arena to initialize </td></tr>
    <tr><td class="paramname">name</td><td>Descriptive name for debugging purposes </td></tr>
    <tr><td class="paramname">base</td><td>Start of initial span </td></tr>
    <tr><td class="paramname">size</td><td>Size of initial span </td></tr>
    <tr><td class="paramname">quantum</td><td>Unit of currency </td></tr>
    <tr><td class="paramname">afunc</td><td>Imported alloc function </td></tr>
    <tr><td class="paramname">ffunc</td><td>Imported free function </td></tr>
    <tr><td class="paramname">source</td><td>Imported arena </td></tr>
    <tr><td class="paramname">qcache_max</td><td>Maximum size to cache </td></tr>
    <tr><td class="paramname">vmflag</td><td>VM_SLEEP or VM_NOSLEEP </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_e39282403b26f202695773646ce59e2c.html">kern</a></li><li class="navelem"><a class="el" href="dir_60739b2e56d7ac2b25b4f840ed126fde.html">vm</a></li><li class="navelem"><a class="el" href="vmem_8h.html">vmem.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
